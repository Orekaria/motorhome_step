# Replacement for the Step circuit in a vehicle

## Instructions
- Create the circuit
- Upload the code to the Arduino

## Operating instructions
- Open button: to extend the step
  - the step will auto-close after 11 seconds
  - if the Open button is pushed again within 2 seconds after the step has extended, the auto-close is disabled
- Close button: to retract the step
- If the vehicle starts moving, an alarm will sound and the step will auto-close
- The step can be controlled by the user and the arduino indistinctly thanks to the 2x relays

## Bill of materials
- Arduino Nano 3
- 2x relays with NC/NO inbuilt connections to handle direct user input as well as arduino control
- 1x MPU-6050 accelerometer to detect if the vehicle is moving
- 1x Active buzzer to alarm when the vehicle is moving and the step is being auto-closed
- 1x Regulator to 5V to feed the Arduino, the relays and the MPU-6050
- 3x 10k resistances for the buttons and the interrupt of the buttons
- 2x 1N4007 diodes for the interrupt generated by the buttons

## improvements
- use a SW-420 motion sensors instead of the MPU-6050 or any other with less power consumption
- use optocouplers instead of relays
- reduce power consumption
  - add an optocoupler to power off the relays' circuit when they are not being used
  - add an optocoupler to power off the MPU-6050. Use a watchdog to read the values sporadically

## Breadboard prototype
![Schematic](images/breadboard_view1.jpg)
![Schematic](images/breadboard_view2.jpg)
